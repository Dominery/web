# 变量与运算符

### 标识符

对各种变量、函数和类等要素命名时使用的字符序列称为标识符。

* 合法标识符规则：
  1. 只能由字母、数字、下划线、$组成
  2. 不能以数字开头
  3. 不能是关键字或保留字
  4. 大小写敏感
* 名称命名规范
  * 变量名、函数名：多单词组成时，第一个单词首字母小写，第二个单词开始每个单词首字母大写：xxxYyyZzz

### 变量

变量是计算机语言中能储存计算结果或能表示值抽象概念。

#### 变量的使用

JavaScript中通过var定义的变量可以先使用后声明。这种特性叫做变量声明提升。如果变量通过const定义，则该变量为常量，赋值后无法修改。

* 变量声明提升

     可以提前使用一个稍后才声明的变量，而不会引发异常，该变量的值为undefined。
     > 在执行所有代码前，JS有预解析阶段，会预读所有变量的定义，变量声明提升只提升定义，不提升值。
     
#### 注意事项

* 变量声明的提升是JavaScript的特性，所以经常出面试题
  
* 在实际开发时，不要刻意使用变量声明提升特性。一定要先定义并给变量赋初值，然后再使用变量
  
* 变量声明

     通过"var 变量名"语法声明变量。如果变量不通过声明关键字定义，那么该变量将被定义为全局变量。

* 作用域

     * 局部变量

          JavaScript是函数级作用域编程语言:变量只在其定义时所在的function内部有意义。

     * 全局变量

          如果不将变量定义在任何函数的内部，此时这个变量就是全局变量，它在任何函数内都可以被访问和更改。

     * 遮蔽效应

          如果函数中也定义了和全局同名的变量，则函数内的变量会将全局的变量“遮蔽”

* 默认值

  变量声明后未初始化，默认值是undefined

  一个变量只有定义并赋初值之后，才算正式初始化完成，可以使用逗号同时声明和初始化多个变量。

* 变量常见错误

  1. 不用var定义，而直接将值赋予它，虽不引发报错，但会产生作用域问题。

  2. 尝试使用一个既没有被var定义过，也没有赋过值的字符，就会产生引用错误。

表达式由操作数与运算符组成。由运算符种类的不同可以将基本表达式分为五种。

### 基本表达式

#### 算术表达式

| 运算符 | 意义 |
| ------ | ---- |
| +      | 加   |
| -      | 减   |
| *      | 乘   |
| /      | 除   |
| %      | 取余 |

默认情况，乘除法的优先级要高于加法和减法;必要时可以使用圆括号来改变运算的顺序。

* 加号的两种作用

  如果加号两边的操作数都是数字，则为“加法”，否则为连字符

* 取余运算

  a % b表示求a除以b的余数。取余运算中，如果b为负数，则其结果与b为正数时相同。a、b可以是浮点数。

* IEEE754

  JavaScript使用了IEEE754二进制浮点数算术标准，这会使一些个别的小数运算产生“丢失精度”问题。

  解决办法:在进行小数运算时，要调用数字的toFixed()方法保留指定的小数位数

* 幂和开根号

  JavaScript中没有提供幂计算、开根号的运算符。需要使用Math对象的pow和sqrt方法进行计算。如果对负数进行开根运算，返回值为NaN。

* 取整

  Math.ceil()向上取整; Math.floor()向下取整

#### 关系表达式

| 运算符 | 意义     |
| ------ | -------- |
| >      | 大于     |
| <      | 小于     |
| >=     | 大于等于 |
| <=     | 小于等于 |
| ==     | 等于     |
| !=     | 不等于   |
| ===    | 全等于   |
| !==    | 不全等于 |

* 相等与全等

  两个等号运算符不比较值的类型，它会进行隐式转换后比较值是否相等

  > null和undefined用==进行比较涉及隐式强制类型转换，此两者比较后值相等。
  >
  > NaN作为一个特殊的数字类型值，它不自等

  三个等号=运算符，不仅比较值是否相同，也比较类型是否相同

* 连续比较

  js中变量不能像python一样进行连续比较，需要通过逻辑运算符隔开，如果书写连续比较，则会按照顺序计算。

#### 逻辑表达式

| 运算符 | 意义 |
| ------ | ---- |
| !      | 非   |
| &&     | 与   |
| \|\|   | 或   |

与或运算返回的不一定是布尔值，而是返回参与运算的一个值。

非运算返回的是布尔值。

* 短路计算

  a && b运算中:a真，表达式值为b;a假，表达式值为a

  a || b运算中: a真，表达式值为a; a假，表达式值为b

* 运算顺序

  非 > 与 > 或

#### 赋值表达式

| 运算符             | 意义     |
| ------------------ | -------- |
| =                  | 赋值     |
| +=、-=、*=、/=、%= | 快捷赋值 |
| ++                 | 自增运算 |
| --                 | 自减运算 |

* 赋值操作返回的值

  赋值操作都会产生值

  1. 等号赋值后面的值将作为返回值。因此可以连续对多个变量赋值。
  2. 快速赋值已经运算后的变量值将作为返回值。
  3. 自增自减运算如果在变量后面，返回未运算的值，如果在变量前面，返回运算后的值

  ```javascript
  var a,b;
  a = b = 5; //a=5,b=5
  a += b+= 5; //b=10,a=15
  b = a++; // b=15,a=16
  a = ++b;// a= 16, b=16
  ```

#### 综合表达式

* 运算顺序

  非运算→数学运算→关系运算→逻辑运算

### 隐式类型转换

在js中，当运算符在运算时，如果两边数据不统一，就无法计算，这时编译器会自动将运算符两边的数据做一个数据类型转换，转成一样的数据类型再计算，这种无需程序员手动转换的方式就称为隐式类型转换。

如果参与数学运算的某操作数不是数字型且该数学运算不是加法，那么JavaScript会自动将此操作数转换为数字型。

隐式转换的本质是内部调用Number()函数