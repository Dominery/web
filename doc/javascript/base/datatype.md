# 数据类型

计算机程序是通过操作值来运行的，数据类型是值的一个属性，它能够描述在该值上允许执行的操作。

在ECMAScript 2015规范中定义了七种数据类型：number、string、boolean、undifined、null、symbol、object。

这些数据类型分为两大类：原始数据类型和复杂数据类型。object类型是复杂数据类型，非object类型的都是原始数据类型。原始数据类型是编程语言内置的基础数据类型，可用于构造复合类型。

typeof运算符可以检测值类型和函数。

> 值类型是number、string、boolean、undifined、symbol，值类型存储在栈中，变量赋值时采用深拷贝。

**字面量**

在计算机科学中，字面量用于在源代码中表示某个固定值。在JavaScript程序中，字面量不是变量，它是直接给出的固定值。

## 原始数据类型

| 类型名        | typeof检测结果 |
| ------------- | -------------- |
| 数字类型      | number         |
| 字符串类型    | string         |
| 布尔类型      | boolean        |
| undefined类型 | undefined      |
| null类型      | object         |

### 数字类型

JavaScript使用双精度64位浮点数格式（IEEE 754）来表示数字，因此所有数字本质上都是浮点数。

表达无整数位的小数时，可以省略整数位。

较大数或较小数（绝对值较小)可以写成科学计数法，如3e8。

数字类型方法

| 方法            | 功能                                        |
| --------------- | ------------------------------------------- |
| toFiexed(a)     | 返回a位小数位的字符串表示                   |
| toExponential() | 返回以指数表示法表示的数值字符串            |
| toPrecision(a)  | 根据a位数决定调用toFixed()或toExponential() |

* 不同进制的数字

  二进制数值以0b开头，八进制以0开头，十六进制以0x开头

* NaN

  NaN是英语“not a number”的意思，即“不是一个数”，却是一个数字类型的值

  0除以0的结果是NaN，事实上，在数学运算中，若结果不能得到数字，其结果往往都是NaN。

  isNaN()函数可以用来判断变量值是否为NaN。但isNaN()也不好用，它的机理是:只要该变量传入Number()的执行结果是NaN，则isNaN()函数都会得到true。

* infinite

  非零数字除以0时，结果是Infinity或-Infinity

  如果某次计算的结果得到了一个超出JavaScript数值范围的值，那么这个数值将被自动转换成特殊的Infinity值。
  
  要想确定一个数值是不是有穷的，可以使用isFinite()函数。
  
  > Number.NEGATIVE_INFINITY和Number.POSITIVE_INFINITY可以得到负和正Infinity的值

### 字符串类型

JavaScript使用UTF-16编码来表示一个字符。UTF-16编码以两个字节作为一个编码单元，每个字符使用一个编码单元或者两个编码单元来表示。

字符串字面量要用引号包裹，双引号或者单引号均可

* 字符串拼接

  加号可以用来拼接多个字符串或变量值、concat()方法

* 不可变性

  ECMAScript中的字符串是不可变的，也就是说，字符串一旦创建，它们的值就不能改变。要改变某个变量保存的字符串，首先要销毁原来的字符串，然后再用另一个包含新值的字符串填充该变量。

* length属性

  > 如果字符串中包含双字节字符，那么length属性可能不会精确地返回字符串中的字符数目。
  >

#### 常用方法

| 方法           | 功能                     |
| -------------- | ------------------------ |
| charAt()       | 得到指定位置字符         |
| substring(a,b) | 提取[a,b)的子串          |
| substr(a,b)    | 提取从a开始b长度子串     |
| slice(a,b)     | 提取[a,b)子串            |
| toUpperCase()  | 变为大写                 |
| toLowerCase()  | 变为小写                 |
| indexOf()      | 检索字符串               |
| replace()      | 替换第一个匹配的内容     |
| includes()     | 判断是否包含特定字符 es6 |
| padStart()     | 头部补全字符串 es6       |
| padEnd()       | 尾部补全字符串 es6       |
| trim()         | 清除字符串首尾空格 es6   |
| replaceAll()   | 替换所有匹配内容 es6     |

  * 切片方法辨析

    substring(a,b)，如果a=b或者a大于最大位置，返回空字符串，a可以大于b，数字顺序将自动调整升序，如果传入负数，会转换为0

    substr(a,b)，a可以是负数，表示倒数位置，b是负数则转换为0

    slice(a,b)，a，b可以是负数，表示倒数位置，a必须小于b

  * includes()

    第一个参数是待搜索字符串，第二个参数是开始搜索的位置，默认从0开始。

  * padStart、padEnd()

    第一个参数是最大长度，第二个参数是用于补全的字符串，默认空格。

    如果原字符串的长度，等于或大于最大长度，不会消减原字符串，字符串补全不生效，返回原字符串

    用来补全的字符串与原字符串长度之和超过了最大长度，截去超出位数的补全字符串，原字符串不动

  * 首尾空格清除

    trimStart()、trimLeft()都用于去除首空格，trimEnd()、trimRight()用于去除尾空格
    
  * 替换方法

    replaceAll方法接收两个参数searchValue和replacement。searchValue表示搜索模式，可以字符串或全局的正则表达式，replacement是待替换的文本。

    如果replaceAll的搜索模式是一个不带g修饰符的正则表达式，则replaceAll会报错。


### 布尔类型

布尔型值只有两个: true和false，分别表示真和假

### undefined类型

一个没有被赋值的变量的默认值是undefined，而undefined的类型也是undefined。undefined既是值，又是一种类型，这种类型只有它一个值。

### null类型

null表示“空”，它是“空对象”。当我们需要将对象销毁、数组销毁或者删除事件监听时，通常将它们设置为null。

## 显式类型转换

通过javascript提供的方法，实现数据类型的转换，这种方式就称为显式类型转换。

### 转为数字类型

可以使用Number()函数将其余数据类型转换为数字类型。

* 字符串->数字

  * Number()函数能将纯数字字符串将被转换为数字，如果不是纯数字字符串将返回NaN，空字符串转为0。

  * 在数字字符串前添加`+`实现的效果与Number()函数的作用相同。

  * parseInt()函数能将字符串转换为整数。parselnt()将自动截掉第一个非数字字符之后的所有字符，如果字符串不是以数字开头，则转换为NaN。可以为其指定第二个参数，用于解析其余进制格式的字符串。

  * parseFloat()函数能将字符串转换为浮点数。parseFloat()将自动截掉第一个非数字字符、非小数点之后的所有字符，如果字符串不是以数字开头，则转换为NaN。

* 布尔->数字

  true将被转换为1，false为0

* undefined->数字

  结果为NaN

* null->数字

  结果为0

### 转为字符串

可以使用String()函数或者toString()方法将其余数据类型转换为字符串类型。

* 数字->字符串

  变为“长得相同”的字符串。科学计数法和非10进制数字会转为10进制的值。

  数字字面值要调用toString()方法需要对其加括号。

  在调用数值的toString()方法时，可以传递一个参数表示输出数值的基数。

* 布尔值->字符串

  变为“长得相同”的字符串

* undefined、null->字符串

  变为“长得相同”的字符串

### 转为布尔值

* 数字->布尔

  只有0和NaN会被转为false，其余都是true。除0以外的数字转为布尔值都是true，NaN不算是数字。

* 字符串->布尔

  只有空字符串会被转为false

* undefined、null->布尔

  转为false
  
* object ->布尔

  任何非null的对象转为布尔值都是true，即使是false的基本包装类型

## 基本包装类类型

ECMAScript提供了3个特殊的引用类型：Boolean、Number和String，用于操作基本类型值数据。当读取一个基本类型值的时候，后台就会创建一个对应的基本包装类型的对象，从而让我们能够在该对象上调用方法，方法调用结束后台会销毁该对象。

基本包装类创建

* 显式调用基本包装类构造函数创建基本包装类对象。
* Object构造函数传入基本类型会返回对应的基本包装类

对基本包装类型的实例调用typeof会返回"object"，而且所有基本包装类型的对象在转换为布尔类型时值都是true。

包装类对象的PrimitiveValue属性存储它们的本身值。
