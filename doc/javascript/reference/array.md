# 数组

数组(Array)，是用来存储一组相关的值的数据结构。JavaScript中的数组可以存储任意类型的值，数组长度会动态变化。

**类数组对象**

类数组对象:所有属性均为从0开始的自然数序列,并且有length属性，和数组类似可以用方括号书写下标访问对象的某个属性值，但是不能调用数组的方法。

arguments对象是最常见的类数组对象。

可以通过以下方法将类数组对象转换为数组对象：

1. Array.from(arguments)
2. Array.prototype.slice.call(arguments)
3. [...arguments]
4. [...new Set(arguments)]
5. for...of遍历

## 数组的使用

#### 检测数组

数组用typeof检测结果是object

虽然`instanceof`能够检测一个对象是否是数组，但`instanceof`操作符基于构造函数，如果存在多个版本的Array构造函数，那么该检测方法就无效。因而ECMAScript新增了Array.isArray()方法用来检测数组

#### 创建数组方法

1. 使用数组字面量，数组字面量是在中括号中包含以逗号分隔的元素列表。

2. 使用new创建对象，使用数组构造函数创建数组时，new关键字不是必须的

   ```javascript
   var arr1 = [1,2,3,4,5];
   var arr2 = new Array(1,2,3,4,5);
   var arr3 = new Array(4);
   ```
   

创建指定长度填充数字的数组

```javascript
new Array(num).fill(0);
[...new Array(num)].map(n=>0);
```

#### 访问数组项

数组每一项都有下标，下标从0开始，可以使用方括号中书写下标的形式，访问数组的任一项

数组并不是只读的，我们可以修改它其中任何项的值，如果更改的数组项超过了length-1，则会创造这项

**下标越界**

JavaScript规定，访问数组中不存在的项会返回undefined，不会报错

数组的length属性表示它的长度

**数组的遍历**

```javascript
for (var i = 0; i < arr.length; i++) {
	console.log( arr[i]);
}
```

#### 数组展开运算符

展开运算符通过...将数组转换为参数列表形式。与剩余参数的运算过程刚好相反。

**应用**

* 克隆数组
* 合并数组
* 字符串转为数组
* 类数组转为数组

## 数组方法

### 基本方法

| 方法         | 说明                                               |
| ------------ | -------------------------------------------------- |
| push()       | 把新的参数添加到数组的尾部，返回值是数组的新长度   |
| pop()        | 删除末项并返回                                     |
| unshift()    | 把新的参数添加到数组的最前面，返回值是数组的新长度 |
| shift()      | 删除首项并返回                                     |
| splice()     | 替换数组中的指定项                                 |
| slice(a, b)  | 截取[a,b)的子数组                                  |
| concat(a,b)  | 合并数组a、b                                       |
| reverse()    | 将一个数组中项顺序置反                             |
| indexOf()    | 搜索数组中的元素，并返回它所在的位置               |
| includes()   | 判断一个数组是否包含指定的值 es6                   |
| sort()       | 数组排序                                           |
| Array.from() | 将其余的数据类型转换为数组 es6                     |
| Array.of()   | 把一组参数转换为数组 es6                           |
| find()       | 找到满足条件的一个值返回 es6                       |
| findIndex()  | 找到满足条件值的索引返回 es6                       |
| fill()       | 向一个已有的数组中插入全部或部分相同的值           |

#### splice

splice方法前两个参数分别代表起始下标、连续的项数，后面的不定长参数为要替换的数值。有3种不同的方式使用这个方法。

* 删除

  给splice()传2个参数：要删除的第一个元素的位置和要删除的元素数量。

* 插入

  需要给splice()传3个参数：开始位置、0（要删除的元素数量）和要插入的元素

* 替换

  splice()在删除元素的同时可以在指定位置插入新元素，同样要传入3个参数：开始位置、要删除元素的数量和要插入的任意多个元素。

#### sort

数组排序可以使用sort()方法，这个方法的参数又是一个函数。这个函数中的a、b分别表示数组中靠前和靠后的项，如果需要将它们交换位置，则返回任意正数;否则就返回负数。

> 为了实现排序，sort()方法会调用每个数组项的toString()转型方法，然后比较得到的字符串，以确定如何排序。即使数组中的每一项都是数值，sort()方法比较的也是字符串

#### concat

concat会创建一个新数组，该新数组包含原有数组和传入数组参数的元素。如果传入参数不是数组，那么这些参数会被添加到新数组中。

#### Array.from

可以转换的数据类型

* 原生可迭代对象
* 拥有length属性的任意对象，只会将数字键的属性值转换为数组元素。

可以传入第二个参数，用来映射每个元素，类似map。第三个参数可以修改this指向。

#### 与字符串转换

数组的join()方法可以使数组转为字符串;字符串的split()方法可以使字符串转为数组。

* join()

  join()的参数表示以什么字符作为连接符，如果留空则默认以过号分隔，如同调用toString()方法

* split()

  split()的参数表示以什么字符拆分字符串，一般不能留空

### 搜索方法

ECMAScript提供两类搜索数组的方法：按严格相等搜索和按断言函数搜索。

#### 严格相等

indexOf、lastIndexOf、includes都是严格相等搜索方法。

**indexOf**

indexOf有两个参数，第一个参数是要查找的项，第二个是查找项的起点位置的索引。如果查找到该项，则返回它从查找位置起，首次出现的位置。如果没有查找到，则返回-1。

**includes**

第一个参数是待搜索字符串，第二个参数是开始搜索的位置，默认从0开始。判断标准遵循严格相等，对于NaN判断自等。 

#### 断言函数

find、findIndex使用了断言函数。这两个方法的第一个参数是断言函数，第二个可选参数用于指定this。find()返回第一个匹配的元素，findIndex()返回第一个匹配元素的索引。

> 断言函数接收3个参数：元素、索引和数组本身。其中元素是数组中当前搜索的元素，索引是当前元素的索引，而数组就是正在搜索的数组。断言函数返回真值，表示是否匹配。

### 迭代方法

数组迭代方法要求传入一个函数A作为参数，A自身参数由迭代方法传入，分别是item(数组元素)、index(数组下标)、array(数组自身)。迭代方法有第二个可选参数用于指定this。

| 方法      | 说明                                                     |
| --------- | -------------------------------------------------------- |
| filter()  | A需要返回bool值，返回A返回值为true的元素的数组           |
| every()   | A需要返回bool值，如果A对每个元素的返回值为true则返回true |
| forEach() | A无需返回值，该方法无返回值                              |
| map()     | A需要返回一个值，方法返回由A返回值构成的数组             |
| some()    | A需要返回bool值，如果A对一个元素的返回值为true则返回true |

### 归并方法

`reduce`、`reduceRight`方法返回一个值，这个值是函数参数对数组所有元素进行处理累计的结果。`reduce`会从左到右处理元素，`reduceRight`会从右到左。

函数名参数传入的参数情况：

1. 第一个参数的值是上次处理的结果
2. 第二个参数的值是数组元素
3. 第三个参数的值是迭代的次数
4. 第四个参数的值是数组本身


