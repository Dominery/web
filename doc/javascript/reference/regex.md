# 正则表达式

正则表达式(regular expression)描述了字符串的“构成模式”，经常被用于检查字符串是否符合预定的格式要求

正则表达式“按位”描述规则，是指它是一位一位的描述字符串的构成形式

使用typeof运算符检查正则表达式的类型，结果是object

## 基本使用

### 创建

1. 使用`/pattern/flags`的语法形式，可以快速创建正则表达式

2. 使用new RegExp('内容')的形式，创建正则表达式

   > 使用该方法创建正则表达式需要对反斜杠进行转义

### 元字符

“元字符”是指一位指定类型的字符

| 元字符 | 说明                                               |
| ------ | -------------------------------------------------- |
| \d     | 匹配一个数字                                       |
| \D     | 匹配一个非数字字符                                 |
| \w     | 匹配一个单字字符(字母、数字或者下划线)             |
| \W     | 匹配一个非单字字符                                 |
| \s     | 匹配一个空白字符，包括空格、制表符和换行符任意字符 |
| .      | 匹配任意字符                                       |
| ^      | 匹配开头                                           |
| $      | 匹配结尾                                           |
| \|     | 表示匹配指定几项之间的一项                         |

在特殊字符之前的反斜杠\表示下一个字符不是特殊字符，应该按照字面理解

### 方括号表示法

使用方括号，比如[xyz]，可以创建一个字符集合，表示匹配方括号中的任意字符

可以使用短横-来指定一个字符范围，^表示否定

| 元字符 | 等价的方括号表示 |
| ------ | ---------------- |
| \d     | [0-9]            |
| \D     | [^0-9]           |
| \w     | [A-Za-z0-9_]     |
| \W     | [^A-Za-z0-9_]    |

### 量词

| 量词  | 说明                                                |
| ----- | --------------------------------------------------- |
| *     | 匹配前一个表达式0次或多次。                         |
| +     | 等价于{0,}匹配前面一个表达式1次或者多次。等价于{1,} |
| ？    | 匹配前面一个表达式0次或者1次。等价于{0,1}           |
| {n}   | n是一个正整数，匹配了前面一个字符刚好出现了n次      |
| {n,}  | n是一个正整数，匹配前一个字符至少出现了n次          |
| {n,m} | n和m都是整数。匹配前面的字符至少n次，最多m次        |

### 修饰符

修饰符也叫作标志(flags)，用于使用正则表达式实现高级搜索

| 修饰符 | 说明             |
| ------ | ---------------- |
| i      | 不区分大小写搜索 |
| g      | 全局搜索         |
| m      | 多行查找         |

修饰符的使用

```javascript
var re = /m/gi;
var re = new RegExp('m','gi');
```

## 与字符串的关联

### 正则表达式相关方法

| 方法   | 说明                                                     |
| ------ | -------------------------------------------------------- |
| test() | 测试某字符串是否匹配正则表达式，返回布尔值               |
| exec() | 根据正则表达式，在字符串中进行查找，返回结果数组或者null |

exec()方法特点是，有“g”修饰符的正则表达式将自动成为“有状态”的，这意味着可以对单个字符串中的多次匹配结果进行逐条的遍历。

```javascript
let str = 'abc12345defg234h345';
let regexp = /\d+/g;
let result;
while(result = regexp.exec(str)){
    console.log(result);
}
```

### 字符串相关方法

字符串的一些方法可以使用正则表达式作为参数

| 方法      | 说明                                                         |
| --------- | ------------------------------------------------------------ |
| search()  | 在字符串中根据正则表达式进行查找匹配，返回首次匹配到的位置索引，测试不到则返回-1 |
| match()   | 在字符串中根据正则表达式进行查找匹配，返回一个数组，找不到则返回null |
| replace() | 使用替换字符串替换掉匹配到的子字符串，可以使用正则表达式     |
| split()   | 分隔字符串为数组，可以使用正则表达式                         |

