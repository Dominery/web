# 单位

css中存在多种数据单位用于描述一个元素的宽高。这些单位中除了px是绝对单位，其余单位都是相对单位。

**数据单位**

| 单位 | 说明                 |
| ---- | -------------------- |
| px   | 一个像素单位         |
| %    | 父容器宽高的比例     |
| em   | 自身字体大小为1em    |
| rem  | html的字体大小为1rem |
| vw   | 100vw为视口宽度      |
| vh   | 100wh为视口高度      |

em在移动端不常用，因为该值与自身字体大小相关，不方便修改。

## 相对单位

相对单位在响应式设计中扮演着重要的角色。相对单位使我们可以基于窗口大小来等比例地缩放字号，而不是设置为固定值，或者将网页上的任何元素的大小都相对于基础字号来设置，然后只用改一行代码就能缩放整个网页。

> 响应式在CSS中指的是样式能够根据浏览器窗口的大小有不同的“响应”。

浏览器会根据相对单位的值计算出绝对值，称为计算值。

当不知道如何设置单位时，用rem设置字号，用px设置边框，用em设置其他大部分属性。

### em

元素的字号决定em的大小，em适合基于特定的字号进行排版。

em适合设置padding、height、width、border-radius等属性值。因为当元素的字号改变时，这些属性会等比例缩放。

**em的字号**

当使用em作为元素字号的单位时，此时1em等于元素继承的字号。

当一个元素的字号和其余属性都使用em定义时，浏览器会先计算依据继承的字号计算元素字号，再依据元素字号计算其余属性值。这种特性会导致，当元素字号和某一属性值都是相等的非1的em值，但它们的绝对值却不同。例如，当使用em指定多重嵌套元素的字号，那么这些元素的字体可能逐级缩小或者逐级放大。

### rem

rem是root em的缩写。rem是相对于根元素的单位，根元素即`<html>`元素。使用rem作为单位可以保证在文档的任意位置，rem值相同，绝对值相同。

### 视口的相对单位

视口相对单位主要有下面四个：

* vh：视口高度1/100

* vw：视口宽度的1/100
* vmin：min(vh,vw)
* vmax：max(vh,vw)

> 视口是浏览器窗口里网页可见部分的边框区域。它不包括浏览器的地址栏、工具栏、状态栏。

视口相对长度非常适合展示一个填满屏幕的大图。我们可以将图片放在一个很长的容器里，然后设置图片的高度为100vh，让它等于视口的高度。

**使用vw定义字号**

使用vw定义字号可以保证元素能够在不同屏幕尺寸下平滑过渡，但是单独只有vw会使小尺寸的字号过小。

我们可以使用calc()函数解决上述问题，calc()函数可以对两个及以上的值进行基本的四则运算，利用calc函数将em和vw值相加，可以保证最小字号和平滑过渡。这种方法使得不需要设置媒体响应。

```css
:root{
    font-size: calc(0.5em + 1vw);
}
```

### 无单位数值

无单位数值是不指定单位的数字，line-height、z-index、font-weight都支持这种值。

一个无单位的0只能用于长度值和百分比，不能用于角度值、时间值。

> 长度是一种用于测量距离的CSS值的正式称谓，由一个数值和一个单位组成。

当一个元素的值定义为长度（px、em、rem，等等）时，子元素会继承它的计算值。使用无单位的数值时，继承的是声明值，即在每个继承子元素上会重新算它的计算值。因此我们可以用一个无单位的数值给body设置行高，而不用再给其内部元素单独设置。

## 相对单位的使用

### rem反模式

存在着一种使用rem的反模式，将根元素字号设置为固定大小，其他元素的单位都使用rem，rem的值等于期望的绝对值除以根元素字号。

这种反模式存在两个缺点：

1. 书写了很多重复代码

   需要给不同位置的字体设置单独的字号，会导致需要修改代码，改动地方更多；出错地方增多

2. 这种做法本质还是像素思维

### 正确的模式

#### 设置默认字号

如果你希望默认字号为14px，那么不要将默认字体设置为10px然后再覆盖一遍，而应该直接将根元素字号设置为想要的值。

#### 构造响应式

如果整个网页的样式都使用相对单位，我们可以使用媒体查询，根据屏幕大小改变根元素的字号，这样在不同的屏幕尺寸上网页会整体缩放。

> 媒体查询，即@media规则，可以指定某种屏幕尺寸或者媒体类型（比如，打印机或者屏幕）下的样式

#### 缩放单个组件

如果组件的父元素字号使用rem，组件的其余元素样式使用em，那么可以通过覆盖组件的父元素字号实现整体缩放效果。