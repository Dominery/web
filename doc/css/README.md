# CSS3

css本质是声明规则，对某个元素声明其样式。css由规则构成。规则由选择器和声明块构成，选择器用于选取特定的元素，声明块用于给元素添加样式。声明块由单个声明组成，声明由属性和值组成。

> @规则指以@符号开头的语法

## 层叠

CSS全名叫“层叠式样式表”，层叠式是它重要的性质。层叠式允许多个规则作用于一个元素。如果对同一个元素声明样式构成冲突，那么需要借助层叠的规则进行解决。

层叠会依据三种条件解决冲突的规则

1. 样式表的来源
2. 选择器的优先级
3. 源码顺序

如果一个声明经过上面的三个条件被浏览器应用，那么称该声明为层叠值。元素的一个属性只能有一个层叠值。

### 样式来源规则

样式表来源有两种，作者样式表和用户代理样式表，即浏览器默认样式表。作者样式表优先级更高。

样式来源规则有一个例外：标记为重要的声明。标记了！important的声明会被当作更高优先级的来源。

### 优先级规则

如果无法用来源解决冲突，那么浏览器会使用优先级规则。优先级有两个部分：行内样式和选择器样式。行内样式是在html元素的style属性上书写的样式。行内样式会覆盖选择器样式。

#### 选择器样式

选择器样式优先级规则：id权重>class权重>标签权重。

优先级标记是于表示选择器样式优先级的方式，由三个逗号隔开的数值构成，由左到右分别为id、类、标签选择的个数。

### 源码顺序规则

如果优先级规则依旧无法解决冲突，那么浏览器会依据声明在源码中先后顺序决定应用哪个声明。

#### 链接伪类顺序

伪类是添加到选择器的描述性词语，指定要选择的元素的特殊状态，超级链接拥有4个特殊状态：`:link`、`:visited`、`:hover`、`:active`。

链接伪类的顺序，a:hover必须置于a:link和a:visited之后，才有效，a:active必须在a：hover之后，才有效。而link、visited两个伪类之间顺序无所谓，谁在前都可以。

### 冲突处理

CSS有严密的冲突处理规则来应对多个选择器定义的属性值有冲突的情况。如果多个选择器选择到同一个元素且设置的属性值存在冲突，可依据如下规则判断其属性值。

* 如果选择器的某属性添加了!important，则元素样式为该属性

  > 如果想要将某个选择器的某条属性提升权重，可以在属性后面写!important。添加该标识的属性权重最高。

* 否则查看是否有行内样式

  如果有则元素样式为行内样式

  * 否则计算选择器权重

    如果权重不同，则应用权重高的样式

    如果权重相同，则看在内部样式中，哪个选择器书写位置靠后。

## 继承

继承是除层叠以外的给元素添加样式的规则。如果一个元素的某个属性没有层叠值，并且该属性是继承属性，那么可能会继承祖先元素的值。

### 继承属性

#### 文本相关

color、font、font-family、font-size、font-weight、font-variant、font-style、line-height、letter-spacing、text-align、text-indent、text-transform、white-space以及word-spacing

#### 其余属性

* 列表

  list-style、list-style-type、list-style-position以及list-style-image

* 表格

  border-collapse和border-spacing

### 关键字

#### initial

如果一个元素的属性被设置为initial，那么该属性恢复默认值。auto有时也可以实现该效果，但是auto不是所有属性的默认值。

#### inherit

如果一个元素的属性值是inherit，那么该属性会继承祖先的值。